# Rust Audio Player

一个使用Rust编写的现代化图形界面音频播放器，使用iced GUI框架构建。

## 功能特性

- 🎵 **多格式支持**: 支持MP3、FLAC、WAV、OGG、AAC、M4A等多种音频格式
- 🎨 **现代GUI**: 使用iced框架构建的美观现代化界面
- 📁 **文件选择**: 内置文件选择器，支持多种音频格式过滤
- ⏯️ **播放控制**: 播放、暂停、停止功能
- 🔊 **音量控制**: 可调节音量滑块
- 📊 **进度显示**: 显示播放进度条和时间信息
- 📈 **音频信息**: 显示音频文件的详细信息（采样率、声道数、比特率等）

## 依赖库

- **iced**: 图形用户界面框架
- **symphonia**: 音频解码库
- **cpal**: 跨平台音频库
- **rfd**: 文件对话框库
- **clap**: 命令行参数解析

## 编译和运行

### 系统要求

- Rust 1.70+
- Linux/Windows/macOS

### 编译

```bash
cargo build --release
```

### 运行

**图形界面模式**:
```bash
cargo run
```

**指定音频文件**:
```bash
cargo run -- path/to/audio/file.mp3
```

**命令行选项**:
```bash
# 显示帮助
cargo run -- --help

# 列出可用的音频输出设备
cargo run -- --list-devices

# 查看音频文件信息
cargo run -- --info path/to/audio/file.mp3
```

## 使用说明

### 图形界面操作

1. **打开文件**: 点击"📁 Open File"按钮选择音频文件
2. **播放/暂停**: 点击"▶ Play"或"⏸ Pause"按钮
3. **停止**: 点击"⏹ Stop"按钮停止播放并重置进度
4. **调节音量**: 拖动音量滑块调整音量（0-100%）
5. **查看信息**: 界面会显示当前文件名、音频格式信息和播放时间

### 界面说明

- **文件信息区**: 显示当前加载的文件名和音频格式信息
- **时间显示**: 显示当前播放时间和总时长
- **进度条**: 显示播放进度
- **控制按钮**: 文件选择、播放/暂停、停止
- **音量控制**: 音量滑块和百分比显示

## 支持的音频格式

- MP3 (MPEG Audio Layer 3)
- FLAC (Free Lossless Audio Codec)
- WAV (Waveform Audio Format)
- OGG (Ogg Vorbis)
- AAC (Advanced Audio Codec)
- M4A (MPEG-4 Audio)

## 技术架构

### 核心组件

- **PlayerApp**: 主应用程序结构，实现iced的Application trait
- **AudioFile**: 音频文件处理，使用symphonia进行音频解码
- **PlaybackState**: 播放状态管理
- **Message**: 事件消息系统

### 架构优势

- **异步处理**: 文件选择和音频处理使用异步模式
- **响应式UI**: 基于消息传递的事件驱动架构
- **跨平台**: 支持Linux、Windows、macOS

## 从TUI到GUI的迁移

这个项目原本是一个基于ratatui的终端界面(TUI)音频播放器，现在已经成功迁移到使用iced的图形界面(GUI)：

### 主要改进

1. **用户界面**: 从终端文本界面升级为现代化图形界面
2. **交互方式**: 从键盘快捷键改为鼠标点击操作
3. **可视化**: 更直观的进度条、按钮和滑块
4. **文件选择**: 集成文件选择器，无需命令行参数

### 保留功能

- 音频解码和播放核心逻辑
- 多格式音频支持
- 音频设备管理
- 错误处理机制

## 开发计划

- [x] ✅ 实现真正的音频播放功能
- [ ] 添加播放进度条拖拽跳转功能
- [ ] 添加播放列表功能
- [ ] 添加音频可视化
- [ ] 添加均衡器
- [ ] 添加拖放文件支持
- [ ] 添加键盘快捷键
- [ ] 添加主题切换功能
- [ ] 添加播放状态实时同步

## 许可证

MIT License - 详见LICENSE文件

## 贡献

欢迎提交问题和拉取请求！

---

*使用Rust和iced构建的现代化音频播放器* 